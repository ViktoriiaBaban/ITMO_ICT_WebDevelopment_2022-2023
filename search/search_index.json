{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to ViktoriiaBaban \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0443 \"Web-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\" \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u041a33412 \u0411\u0430\u0431\u0430\u043d \u0412\u0438\u043a\u0442\u043e\u0440\u0438\u0438 \u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442 \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 1. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438. \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 2. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u043d\u0430 django. \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 3. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043d\u0430 django rest. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 API. \u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0440\u0430\u0431\u043e\u0442 \u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 \u21163.1. Django Web framework. \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u0438\u0445 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435.","title":"Home"},{"location":"#welcome-to-viktoriiababan","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0443 \"Web-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\" \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u041a33412 \u0411\u0430\u0431\u0430\u043d \u0412\u0438\u043a\u0442\u043e\u0440\u0438\u0438","title":"Welcome to ViktoriiaBaban"},{"location":"#_1","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 1. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438. \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 2. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0433\u043e \u0441\u0430\u0439\u0442\u0430 \u043d\u0430 django. \u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 3. \u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043d\u0430 django rest. \u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 API.","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442"},{"location":"#_2","text":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u0430\u043d\u044f\u0442\u0438\u0435 \u21163.1. Django Web framework. \u0417\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u0438\u0445 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435.","title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0440\u0430\u0431\u043e\u0442"},{"location":"lab_1/","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 1. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 1 server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) conn, addr = sock.accept() print('connected with:', addr) while True: data = conn.recv(1024) print(data.decode(\"utf-8\")) if not data: break conn.send(b'Hello, client.\\n') conn.close() client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) sock.send(b'Hello, server.\\n') data = sock.recv(1024) print(data.decode(\"utf-8\")) sock.close() \u0417\u0430\u0434\u0430\u043d\u0438\u0435 2 \u0412\u0430\u0440\u0438\u0430\u043d\u0442: \u0422\u0435\u043e\u0440\u0435\u043c\u0430 \u041f\u0438\u0444\u0430\u0433\u043e\u0440\u0430 server.py import socket from math import sqrt sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) conn, addr = sock.accept() print('connected:', addr) while True: data = conn.recv(1024).decode() try: data = data.split(\" \") katet_1 = float(data[0]) katet_2 = float(data[1]) gipotenyza = float(data[2]) except: conn.sendall('\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445!\\n'.encode()) else: if katet_2 == 0: katet_2 = sqrt(gipotenyza**2 - katet_1**2) conn.sendall(f'\u0412\u0442\u043e\u0440\u043e\u0439 \u043a\u0430\u0442\u0435\u0442 \u0438\u043c\u0435\u0435\u0442 \u0434\u043b\u0438\u043d\u0443: {katet_2}\\n'.encode()) elif gipotenyza == 0: gipotenyza = sqrt(katet_1**2 + katet_2**2) conn.sendall(f'\u0413\u0438\u043f\u043e\u0442\u0435\u043d\u0443\u0437\u0430 \u0438\u043c\u0435\u0435\u0442 \u0434\u043b\u0438\u043d\u0443: {gipotenyza}\\n'.encode()) else: if gipotenyza == sqrt(katet_1**2 + katet_2**2): conn.sendall('\u0422\u0435\u043e\u0440\u0435\u043c\u0430 \u041f\u0438\u0444\u0430\u0433\u043e\u0440\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f. \u0412\u0441\u0451 \u0432\u0435\u0440\u043d\u043e, \u044d\u0442\u043e - \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u044b\u0439 \u0442\u0440\u0435\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.'.encode()) else: conn.sendall('\u0422\u0435\u043e\u0440\u0435\u043c\u0430 \u041f\u0438\u0444\u0430\u0433\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f. \u0422\u0440\u0435\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a \u043d\u0435 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u044b\u0439!'.encode()) if not data: break conn.send(b'Hello, client.\\n') conn.close() client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) data = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043a\u0430\u0442\u0435\u0442\u043e\u0432: \").replace(\" \", \"\") data += \" \" + input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u043a\u0430\u0442\u0435\u0442\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438\u043d\u0430\u0447\u0435 - \u0432\u0432\u0435\u0434\u0438\u0442\u0435 0: \").replace(\" \", \"\") data += \" \" + input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0433\u0438\u043f\u043e\u0442\u0435\u043d\u0443\u0437\u044b, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438\u043d\u0430\u0447\u0435 - \u0432\u0432\u0435\u0434\u0438\u0442\u0435 0: \").replace(\" \", \"\") sock.send(data.encode()) result = sock.recv(1024) print(result.decode(\"utf-8\")) sock.close() \u0417\u0430\u0434\u0430\u043d\u0438\u0435 3 server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) conn, addr = sock.accept() print('connected with:', addr) with open('index.html') as f: page = f.read() response = 'HTTP/1.0 200 OK\\n\\n' + \"Content-Type: text/html\\n\\n\" + page conn.sendall(response.encode(\"utf-8\")) conn.close() client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) data = sock.recv(1024) print(data.decode(\"utf-8\")) sock.close() index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>My page</title> </head> <body> <h1>Welcome, friend!</h1> </body> </html> \u0417\u0430\u0434\u0430\u043d\u0438\u0435 4 server.py import socket import threading def send_message(sock, msg): for client in clients: if sock != client: client.send(msg) def handle_client(socket, address, username): if not clients.setdefault(socket): clients[socket] = username print(f'{username}[{address[0]}:{address[1]}] \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u0447\u0430\u0442\u0443') send_message(socket, f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {username} \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u0447\u0430\u0442\u0443'.encode()) while True: try: message = socket.recv(1024) if message.decode('utf-8').find('EXIT FROM CHAT') != -1: print(f'{username}[{address[0]}:{address[1]}] \u043f\u043e\u043a\u0438\u043d\u0443\u043b \u0447\u0430\u0442') send_message(socket, f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {username} \u043f\u043e\u043a\u0438\u043d\u0443\u043b \u0447\u0430\u0442'.encode()) clients.pop(socket) break send_message(socket, message) except ConnectionResetError: print(f'{username}[{address[0]}:{address[1]}] \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e \u043f\u0440\u043e\u043f\u0430\u043b...') send_message(socket, f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {username} \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e \u043f\u0440\u043e\u043f\u0430\u043b...'.encode()) break socket.close() sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) clients = {} while True: try: conn, addr = sock.accept() data = conn.recv(1024).decode('utf-8') t1 = threading.Thread(target=handle_client, args=(conn, addr, data)) t1.start() except KeyboardInterrupt: print('Server stopped') break conn.close() client.py import threading import socket import time def get_message(): while True: try: data = sock.recv(1024).decode('utf-8') print(data) except socket.error: time.sleep(0.5) continue def write_message(): while True: message = input() sock.sendto(('[' + name + '] ' + message).encode('utf-8'), server) if message == 'EXIT FROM CHAT': break sock.close() sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) name = input('\u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043e\u0439 \u043d\u0438\u043a\u043d\u044d\u0439\u043c: ') print(f'\u041f\u0440\u0438\u0432\u0435\u0442, {name}! \u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u0448\u044c \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435.') print('\u0415\u0441\u043b\u0438 \u0437\u0430\u0445\u043e\u0447\u0435\u0448\u044c \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0447\u0430\u0442\u0430 \u043d\u0430\u043f\u0438\u0448\u0438 EXIT FROM CHAT\\n') server = '', 9523 sock.sendto((name).encode('utf-8'), server) thread_send = threading.Thread(target=write_message, args=()) thread_get = threading.Thread(target=get_message, args=()) thread_send.start() thread_get.start() \u0417\u0430\u0434\u0430\u043d\u0438\u0435 5 server.py import socket class MyHTTPServer: def __init__(self, host, port, name): self.host = host self.port = port self.name = name self.marks = [] def serve_forever(self): serve_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) serve_socket.bind((self.host, self.port)) serve_socket.listen(10) print('hi') while True: client_socket, address = serve_socket.accept() self.serve_client(client_socket) def serve_client(self, sock): data = sock.recv(4096).decode(\"utf-8\") request = self.parse_request(data) response = self.handle_request(request) sock.send(response.encode()) def parse_request(self, data): request_line = data.split('\\r\\n')[0] words = request_line.split() if len(words) == 3: try: par = data.split('\\r\\n')[-1] param = {} for p in par.split(\"&\"): param[p[:p.index('=')]] = p[p.index('=') + 1:] req = {\"method\": words[0], \"url\": words[1], \"version\": words[2], \"parametrs\": param} except: req = {\"method\": words[0], \"url\": words[1], \"version\": words[2], \"parametrs\": {}} else: raise Exception('Malformed request line') print(req) return req def parse_headers(self, data): lines = data.split('\\r\\n')[1:] headers = {} for line in lines: parts = line.split(': ') headers[parts[0]] = parts[1] return headers def handle_request(self, request): response = f\"{request['version']} 200 OK\\n\\n\" if request['method'] == 'GET' and request['url'] == \"/\": with open('index.html') as page: response += page.read() elif request['method'] == 'GET' and request['url'] == \"/view\": body = '<!DOCTYPE html>' \\ '<html lang=\"ru\">' \\ '<head>' \\ '<meta charset=\"UTF-8\">' \\ '<title>\u041e\u0446\u0435\u043d\u043a\u0438</title>' \\ '</head>' \\ '<body>' \\ '<table align=\"center\" width=\"20%\" border=\"1\">' for subject, mark in self.marks: body +=f\"<tr><td>{subject}</td><td>{mark}</td></tr>\" body += '</table></body></html>' response += body elif request['method'] == 'POST': self.marks.append((request['parametrs']['subject'], request['parametrs']['mark'])) return response if __name__ == '__main__': host = 'localhost' port = 9523 name = 'torry-site.ru' serv = MyHTTPServer(host, port, name) try: serv.serve_forever() except KeyboardInterrupt: pass index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Marks</title> <script> function submitForm() { let http = new XMLHttpRequest(); http.open(\"POST\", \"http://127.0.0.1:9523/view\", true); http.setRequestHeader(\"Content\",\"text/html\"); let params = \"?mark=\" + document.getElementById(\"mark\").value + \"&subject=\" + document.getElementById(\"subject\").value; http.send(params); } </script> </head> <body> <form action=\"\" method=\"post\" align=\"center\" onsubmit=\"submitForm();\"> <br> <div> <label for=\"subject\">Subject:</label> <input type=\"text\" id=\"subject\" name=\"subject\"/> </div> <br> <div> <label for=\"mark\">Mark:</label> <input type=\"number\" id=\"mark\" name=\"mark\"/> </div> <br> <div> <input type=\"submit\"> </div> </form> </body> </html>","title":"\u041b\u0420 1"},{"location":"lab_1/#1","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 1. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043a\u0435\u0442\u0430\u043c\u0438"},{"location":"lab_1/#1_1","text":"server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) conn, addr = sock.accept() print('connected with:', addr) while True: data = conn.recv(1024) print(data.decode(\"utf-8\")) if not data: break conn.send(b'Hello, client.\\n') conn.close() client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) sock.send(b'Hello, server.\\n') data = sock.recv(1024) print(data.decode(\"utf-8\")) sock.close()","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1"},{"location":"lab_1/#2","text":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442: \u0422\u0435\u043e\u0440\u0435\u043c\u0430 \u041f\u0438\u0444\u0430\u0433\u043e\u0440\u0430 server.py import socket from math import sqrt sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) conn, addr = sock.accept() print('connected:', addr) while True: data = conn.recv(1024).decode() try: data = data.split(\" \") katet_1 = float(data[0]) katet_2 = float(data[1]) gipotenyza = float(data[2]) except: conn.sendall('\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445!\\n'.encode()) else: if katet_2 == 0: katet_2 = sqrt(gipotenyza**2 - katet_1**2) conn.sendall(f'\u0412\u0442\u043e\u0440\u043e\u0439 \u043a\u0430\u0442\u0435\u0442 \u0438\u043c\u0435\u0435\u0442 \u0434\u043b\u0438\u043d\u0443: {katet_2}\\n'.encode()) elif gipotenyza == 0: gipotenyza = sqrt(katet_1**2 + katet_2**2) conn.sendall(f'\u0413\u0438\u043f\u043e\u0442\u0435\u043d\u0443\u0437\u0430 \u0438\u043c\u0435\u0435\u0442 \u0434\u043b\u0438\u043d\u0443: {gipotenyza}\\n'.encode()) else: if gipotenyza == sqrt(katet_1**2 + katet_2**2): conn.sendall('\u0422\u0435\u043e\u0440\u0435\u043c\u0430 \u041f\u0438\u0444\u0430\u0433\u043e\u0440\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f. \u0412\u0441\u0451 \u0432\u0435\u0440\u043d\u043e, \u044d\u0442\u043e - \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u044b\u0439 \u0442\u0440\u0435\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a.'.encode()) else: conn.sendall('\u0422\u0435\u043e\u0440\u0435\u043c\u0430 \u041f\u0438\u0444\u0430\u0433\u043e\u0440\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f. \u0422\u0440\u0435\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a \u043d\u0435 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u044b\u0439!'.encode()) if not data: break conn.send(b'Hello, client.\\n') conn.close() client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) data = input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043a\u0430\u0442\u0435\u0442\u043e\u0432: \").replace(\" \", \"\") data += \" \" + input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u043a\u0430\u0442\u0435\u0442\u0430, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438\u043d\u0430\u0447\u0435 - \u0432\u0432\u0435\u0434\u0438\u0442\u0435 0: \").replace(\" \", \"\") data += \" \" + input(\"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0433\u0438\u043f\u043e\u0442\u0435\u043d\u0443\u0437\u044b, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438\u043d\u0430\u0447\u0435 - \u0432\u0432\u0435\u0434\u0438\u0442\u0435 0: \").replace(\" \", \"\") sock.send(data.encode()) result = sock.recv(1024) print(result.decode(\"utf-8\")) sock.close()","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2"},{"location":"lab_1/#3","text":"server.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) conn, addr = sock.accept() print('connected with:', addr) with open('index.html') as f: page = f.read() response = 'HTTP/1.0 200 OK\\n\\n' + \"Content-Type: text/html\\n\\n\" + page conn.sendall(response.encode(\"utf-8\")) conn.close() client.py import socket sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) data = sock.recv(1024) print(data.decode(\"utf-8\")) sock.close() index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>My page</title> </head> <body> <h1>Welcome, friend!</h1> </body> </html>","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3"},{"location":"lab_1/#4","text":"server.py import socket import threading def send_message(sock, msg): for client in clients: if sock != client: client.send(msg) def handle_client(socket, address, username): if not clients.setdefault(socket): clients[socket] = username print(f'{username}[{address[0]}:{address[1]}] \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u0447\u0430\u0442\u0443') send_message(socket, f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {username} \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0441\u044f \u043a \u0447\u0430\u0442\u0443'.encode()) while True: try: message = socket.recv(1024) if message.decode('utf-8').find('EXIT FROM CHAT') != -1: print(f'{username}[{address[0]}:{address[1]}] \u043f\u043e\u043a\u0438\u043d\u0443\u043b \u0447\u0430\u0442') send_message(socket, f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {username} \u043f\u043e\u043a\u0438\u043d\u0443\u043b \u0447\u0430\u0442'.encode()) clients.pop(socket) break send_message(socket, message) except ConnectionResetError: print(f'{username}[{address[0]}:{address[1]}] \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e \u043f\u0440\u043e\u043f\u0430\u043b...') send_message(socket, f'\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c {username} \u043d\u0435\u043e\u0436\u0438\u0434\u0430\u043d\u043d\u043e \u043f\u0440\u043e\u043f\u0430\u043b...'.encode()) break socket.close() sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.bind(('', 9523)) sock.listen(10) clients = {} while True: try: conn, addr = sock.accept() data = conn.recv(1024).decode('utf-8') t1 = threading.Thread(target=handle_client, args=(conn, addr, data)) t1.start() except KeyboardInterrupt: print('Server stopped') break conn.close() client.py import threading import socket import time def get_message(): while True: try: data = sock.recv(1024).decode('utf-8') print(data) except socket.error: time.sleep(0.5) continue def write_message(): while True: message = input() sock.sendto(('[' + name + '] ' + message).encode('utf-8'), server) if message == 'EXIT FROM CHAT': break sock.close() sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM) sock.connect(('localhost', 9523)) name = input('\u0412\u0432\u0435\u0434\u0438 \u0441\u0432\u043e\u0439 \u043d\u0438\u043a\u043d\u044d\u0439\u043c: ') print(f'\u041f\u0440\u0438\u0432\u0435\u0442, {name}! \u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u0448\u044c \u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435.') print('\u0415\u0441\u043b\u0438 \u0437\u0430\u0445\u043e\u0447\u0435\u0448\u044c \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0447\u0430\u0442\u0430 \u043d\u0430\u043f\u0438\u0448\u0438 EXIT FROM CHAT\\n') server = '', 9523 sock.sendto((name).encode('utf-8'), server) thread_send = threading.Thread(target=write_message, args=()) thread_get = threading.Thread(target=get_message, args=()) thread_send.start() thread_get.start()","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 4"},{"location":"lab_1/#5","text":"server.py import socket class MyHTTPServer: def __init__(self, host, port, name): self.host = host self.port = port self.name = name self.marks = [] def serve_forever(self): serve_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) serve_socket.bind((self.host, self.port)) serve_socket.listen(10) print('hi') while True: client_socket, address = serve_socket.accept() self.serve_client(client_socket) def serve_client(self, sock): data = sock.recv(4096).decode(\"utf-8\") request = self.parse_request(data) response = self.handle_request(request) sock.send(response.encode()) def parse_request(self, data): request_line = data.split('\\r\\n')[0] words = request_line.split() if len(words) == 3: try: par = data.split('\\r\\n')[-1] param = {} for p in par.split(\"&\"): param[p[:p.index('=')]] = p[p.index('=') + 1:] req = {\"method\": words[0], \"url\": words[1], \"version\": words[2], \"parametrs\": param} except: req = {\"method\": words[0], \"url\": words[1], \"version\": words[2], \"parametrs\": {}} else: raise Exception('Malformed request line') print(req) return req def parse_headers(self, data): lines = data.split('\\r\\n')[1:] headers = {} for line in lines: parts = line.split(': ') headers[parts[0]] = parts[1] return headers def handle_request(self, request): response = f\"{request['version']} 200 OK\\n\\n\" if request['method'] == 'GET' and request['url'] == \"/\": with open('index.html') as page: response += page.read() elif request['method'] == 'GET' and request['url'] == \"/view\": body = '<!DOCTYPE html>' \\ '<html lang=\"ru\">' \\ '<head>' \\ '<meta charset=\"UTF-8\">' \\ '<title>\u041e\u0446\u0435\u043d\u043a\u0438</title>' \\ '</head>' \\ '<body>' \\ '<table align=\"center\" width=\"20%\" border=\"1\">' for subject, mark in self.marks: body +=f\"<tr><td>{subject}</td><td>{mark}</td></tr>\" body += '</table></body></html>' response += body elif request['method'] == 'POST': self.marks.append((request['parametrs']['subject'], request['parametrs']['mark'])) return response if __name__ == '__main__': host = 'localhost' port = 9523 name = 'torry-site.ru' serv = MyHTTPServer(host, port, name) try: serv.serve_forever() except KeyboardInterrupt: pass index.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Marks</title> <script> function submitForm() { let http = new XMLHttpRequest(); http.open(\"POST\", \"http://127.0.0.1:9523/view\", true); http.setRequestHeader(\"Content\",\"text/html\"); let params = \"?mark=\" + document.getElementById(\"mark\").value + \"&subject=\" + document.getElementById(\"subject\").value; http.send(params); } </script> </head> <body> <form action=\"\" method=\"post\" align=\"center\" onsubmit=\"submitForm();\"> <br> <div> <label for=\"subject\">Subject:</label> <input type=\"text\" id=\"subject\" name=\"subject\"/> </div> <br> <div> <label for=\"mark\">Mark:</label> <input type=\"number\" id=\"mark\" name=\"mark\"/> </div> <br> <div> <input type=\"submit\"> </div> </form> </body> </html>","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 5"},{"location":"lab_2/","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 2 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 \"\u041e\u0442\u0435\u043b\u0438\" models.py from django.core.validators import MinValueValidator, MaxValueValidator from django.core.exceptions import ValidationError from django.db import models class Hotel(models.Model): name = models.CharField(\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f\", max_length=50, primary_key=True) owner = models.CharField(\"\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043e\u0442\u0435\u043b\u044f\", max_length=50) address = models.CharField(\"\u0410\u0434\u0440\u0435\u0441 \u043e\u0442\u0435\u043b\u044f\", max_length=100) class Room(models.Model): TYPE_ROOM = [ ('S', '\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442'), ('\u0421', '\u041a\u043e\u043c\u0444\u043e\u0440\u0442'), ('L', '\u041b\u044e\u043a\u0441'), ('F', '\u0421\u0435\u043c\u0435\u0439\u043d\u044b\u0439'), ('P', '\u041f\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u0441\u043a\u0438\u0439'), ('A', '\u0410\u043f\u0430\u0440\u0442\u0430\u043c\u0435\u043d\u0442\u044b') ] hotel = models.ForeignKey(Hotel, on_delete=models.CASCADE, verbose_name=\"\u041e\u0442\u0435\u043b\u044c\") number = models.IntegerField(\"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b\") description = models.CharField(\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430\", max_length=1000) type_room = models.CharField(\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\", max_length=1, choices=TYPE_ROOM) beds = models.PositiveSmallIntegerField(\"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\", validators=[MinValueValidator(1)]) price = models.PositiveIntegerField(\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0430\") class Meta: # One hotel can't have two rooms with the same number unique_together = ('hotel', 'number') class Guest(models.Model): last_name = models.CharField(\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\", max_length=30, null=False) first_name = models.CharField(\"\u0418\u043c\u044f\", max_length=30, null=False) passport = models.CharField(\"\u041d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430\", primary_key=True, max_length=30) class Booking(models.Model): hotel = models.ForeignKey(Hotel, on_delete=models.CASCADE, verbose_name=\"\u041e\u0442\u0435\u043b\u044c\") room = models.ForeignKey(Room, on_delete=models.CASCADE) guest = models.ForeignKey(Guest, on_delete=models.CASCADE) date_start = models.DateField(\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") date_end = models.DateField(\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") total_price = models.PositiveIntegerField(\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f\", null=False) @property def days(self): return (self.date_end - self.date_start).days def check_date(self): if self.date_start >= self.date_end: raise ValidationError(\"\u041a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439!\") def save(self, *args, **kwargs): self.total_price = self.room.price * self.days super(Booking, self).save(*args, **kwargs) class Feedback(models.Model): booking = models.ForeignKey(Booking, on_delete=models.CASCADE, verbose_name=\"\u041a\u043e\u0434 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\") author = models.CharField(\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u043d\u0438\u043a\", max_length=30) rate = models.IntegerField(\"\u041e\u0446\u0435\u043d\u043a\u0430\", default=0, validators=[MaxValueValidator(10), MinValueValidator(1)]) date_start = models.DateField(\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") date_end = models.DateField(\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") text = models.TextField(\"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\", null=False) def save(self, *args, **kwargs): self.date_start = self.booking.date_start self.date_end = self.booking.date_end super(Feedback, self).save(*args, **kwargs) urls.py from django.contrib import admin from django.urls import path from hotels.views import * urlpatterns = [ path(\"admin/\", admin.site.urls), path('main/', main_page, name='main_page'), path(\"guests/add/\", AddGuests.as_view(), name='add_guest'), path('guests/<str:hotel_name>', guests_list), path(\"rooms/\", ListRooms.as_view(), name='rooms'), path(\"bookings/create\", CreateBooking.as_view(), name='add_booking'), path(\"bookings/my/\", MyBookings, name='my_bookings'), path(\"bookings/<int:guest_passport>/\", UserBookings), path(\"bookings/update/<int:pk>\", UpdateBooking.as_view()), path(\"bookings/delete/<int:pk>\", DeleteBooking.as_view()), path(\"feedbacks/add/\", AddFeedback, name='give_feedback'), path('feedbacks/',AllFeedbacks, name='all_feedbacks'), path('hotel/', get_hotel, name='hotel'), ] forms.py from django import forms from hotels.models import Feedback class CreateFeedback(forms.ModelForm): class Meta: model = Feedback fields = ['booking', 'author', 'text', 'rate'] admin.py from django.contrib import admin from hotels.models import * admin.site.register(Booking) admin.site.register(Hotel) admin.site.register(Guest) admin.site.register(Feedback) admin.site.register(Room) views.py from django.shortcuts import render, redirect from django.http import Http404 from hotels.models import Hotel, Booking, Room, Guest, Feedback from django.views.generic import ListView, UpdateView, CreateView, DeleteView from hotels.forms import CreateFeedback # \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 def main_page(request): return render(request, 'main_page.html') # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f class AddGuests(CreateView): model = Guest fields = [ \"last_name\", \"first_name\", \"passport\", ] template_name = \"add_guest.html\" success_url = \"/main/\" # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 class ListRooms(ListView): model = Room template_name = 'list_rooms.html' # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class CreateBooking(CreateView): model = Booking fields = [ 'hotel', 'room', 'guest', 'date_start', 'date_end' ] template_name = 'create_booking.html' success_url = '/bookings/my/' # \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class UpdateBooking(UpdateView): model = Booking fields = ['room', 'date_start', 'date_end'] template_name = 'update_booking.html' success_url = '/bookings/my/' # \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class DeleteBooking(DeleteView): model = Booking template_name = 'delete_booking.html' success_url = '/bookings/my/' # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f def UserBookings(request, guest_passport): need_book = Booking.objects.filter(guest=guest_passport) current_book = {\"object_list\": need_book} return render(request, 'users_bookings.html', current_book) # \u043e\u0442\u0431\u043e\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 def MyBookings(request): try: passport = int(request.POST.get('passport_user')) return redirect(f\"/bookings/{passport}/\") except: return render(request, \"my_bookings.html\") # \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 def AddFeedback(request): data = {} form = CreateFeedback(request.POST) if form.is_valid(): form.save() data['form'] = form return render(request, 'give_feedback.html', data) # \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 def AllFeedbacks(request): list_comments = {\"object_list\": Feedback.objects.all()} return render(request, 'all_feedbacks.html', list_comments) # \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0433\u043e\u0441\u0442\u0435\u0439 \u043e\u0442\u0435\u043b\u044f def get_hotel(request): hotel = request.POST.get('hotel_name') if hotel: return redirect(f\"/guests/{hotel}\") else: return render(request, 'hotel.html') def guests_list(request, hotel_name): guest_in_hotel = Booking.objects.filter(hotel=hotel_name).values_list('guest') nedeed_guests = Guest.objects.filter(passport__in=guest_in_hotel) list_of_guests = { \"object_list\": nedeed_guests, \"hotel_name\": hotel_name} return render(request, 'guests.html', list_of_guests) HTML-\u043a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 main_page.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Main</title> </head> <body> <div class = 'd-flex align-items-center flex-column'> <h1> \u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0435\u043b\u0435\u0439, \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 \u0438 \u0433\u043e\u0441\u0442\u0435\u0439 </h1> </div> <main class=\"container p-5\"> <div class=\"row p-1\"> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'add_guest' %}\" class=\"btn btn-outline-light \">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0433\u043e\u0441\u0442\u044f</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"{% url 'add_booking' %}\" class=\"btn btn-outline-light\">\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'my_bookings' %}\" class=\"btn btn-outline-light\">\u041c\u043e\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</a> </div> </div> </div> </div> <div class=\"row p-1\"> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"{% url 'rooms' %}\" class=\"btn btn-outline-light\">\u041a\u043e\u043c\u043d\u0430\u0442\u044b</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'all_feedbacks' %}\" class=\"btn btn-outline-light\">\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0442\u0437\u044b\u0432\u044b</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"{% url 'give_feedback' %}\" class=\"btn btn-outline-light\">\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432</a> </div> </div> </div> </div> <div class=\"row p-1 \"> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'hotel' %}\" class=\"btn btn-outline-light\">\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043e\u0442\u0435\u043b\u044f</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"/admin/\" class=\"btn btn-outline-light\">\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440</a> </div> </div> </div> </div> </main> </body> </html> add_guest.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>New guest</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0433\u043e\u0441\u0442\u044f</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-center\"> <button type=\"submit\" class=\"btn btn-success g-5 \">\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> all_feedbacks.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>All feedbacks</title> </head> <body> <table class=\"table table-hover table-bordered\"> <thead class=\"table-success\"> <tr> <th scope=\"col\">\u041e\u0442\u0435\u043b\u044c</th> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</th> <th scope=\"col\">\u0410\u0432\u0442\u043e\u0440</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439</th> </tr> </thead> {% for feedback in object_list %} <tbody> <tr> <td>{{ feedback.booking.room.hotel.name }}</td> <td>{{ feedback.booking.room.number }}</td> <td>{{ feedback.author }}</td> <td>{{ feedback.date_start }}</td> <td>{{ feedback.date_end }}</td> <td>{{ feedback.text }}</td> </tr> </tbody> {% endfor %} </table> </body> </html> create_booking.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Create booking</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h1 class=\"mt-2\">\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</h1> <hr class=\"mt-0 mb-4\"> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u0421\u043e\u0437\u0434\u0430\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> delete_booking.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Delete your booking</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} <div> <p class = \"d-flex justify-content-end\"></p>\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \"{{ object }}\"?</p> </div> <div> <input type=\"submit\" value=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\" class=\"btn btn-danger p-2 \"></input> </div> </form> </div> </div> </div> </body> </html> give_feedback.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Give your feedback!</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 \u043e\u0442\u0437\u044b\u0432</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> guests.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>All guests</title> </head> <body> <h2 class=\"d-flex justify-content-center\"> \u0413\u043e\u0441\u0442\u0438 \u043e\u0442\u0435\u043b\u044f {{ hotel_name }}</h2> <table class=\"table table-hover table-bordered\"> <thead class=\"table-success table-hover\"> <tr> <th scope=\"col\">\u0424\u0430\u043c\u0438\u043b\u0438\u044f</th> <th scope=\"col\">\u0418\u043c\u044f</th> </tr> </thead> {% for guest in object_list %} <tbody> <tr> <td>{{ guest.last_name }}</td> <td>{{ guest.first_name }}</td> </tr> </tbody> {% endfor %} </table> </body> </html> hotel.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Hotel</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f:</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-flex p-2 flex-column \"> <input type=\"text\" name=\"hotel_name\"> </div> <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> list_rooms.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>\u041d\u043e\u043c\u0435\u0440\u0430 \u0432 \u043e\u0442\u0435\u043b\u0435</title> </head> <body> <table class=\"table table-hover table-bordered\"> <thead class=\"table-success\"> <tr> <th scope=\"col\">\u041e\u0442\u0435\u043b\u044c</th> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</th> <th scope=\"col\">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430</th> <th scope=\"col\">\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430</th> <th scope=\"col\">\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442</th> <th scope=\"col\">\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0430 \u0437\u0430 \u043d\u043e\u0447\u044c</th> </tr> </thead> {% for room in object_list %} <tbody> <tr> <td>{{ room.hotel.name }}</td> <td>{{ room.number }}</td> <td>{{ room.description}}</td> <td>{{ room.type_room}}</td> <td>{{ room.beds }}</td> <td>{{ room.price}}</td> </tr> </tbody> {% endfor %} </table> </body> </html> my_bookings.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>My bookings</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430:</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-flex p-2 flex-column \"> <input type=\"text\" name=\"passport_user\"> </div> <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> update_booking.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Update your booking</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</h2> {% block content %} <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</button> </div> </form> {% endblock %} </div> </div> </div> </body> </html> users_bookings.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>All bookings</title> </head> <body> <table class=\"table table-striped table-bordered table-hover\"> <thead class=\"table-success\"> <tr> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430</th> <th scope=\"col\">\u041e\u0442\u0435\u043b\u044c</th> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c</th> <th scope=\"col\">\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438</th> </tr> </thead> {% for booking in object_list %} <tbody> <tr> <td>{{ booking.id }}</td> <td>{{ booking.room.hotel.name }}</td> <td>{{ booking.room.number }}</td> <td>{{ booking.date_start }}</td> <td>{{ booking.date_end}}</td> <td>{{ booking.total_price }}</td> <td class=\"d-flex justify-content-start gap-2\"> <a href=\"/bookings/update/{{ booking.id }}\"> <button type=\"button\" class=\"btn btn-outline-primary\">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</button> </a> <a href=\"/bookings/delete/{{ booking.id }}\"> <button type=\"button\" class=\"btn btn-outline-danger\">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</button> </a> </td> </tr> </tbody> {% endfor %} </table> </body> </html>","title":"\u041b\u0420 2"},{"location":"lab_2/#2","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 2"},{"location":"lab_2/#_1","text":"models.py from django.core.validators import MinValueValidator, MaxValueValidator from django.core.exceptions import ValidationError from django.db import models class Hotel(models.Model): name = models.CharField(\"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f\", max_length=50, primary_key=True) owner = models.CharField(\"\u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043e\u0442\u0435\u043b\u044f\", max_length=50) address = models.CharField(\"\u0410\u0434\u0440\u0435\u0441 \u043e\u0442\u0435\u043b\u044f\", max_length=100) class Room(models.Model): TYPE_ROOM = [ ('S', '\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442'), ('\u0421', '\u041a\u043e\u043c\u0444\u043e\u0440\u0442'), ('L', '\u041b\u044e\u043a\u0441'), ('F', '\u0421\u0435\u043c\u0435\u0439\u043d\u044b\u0439'), ('P', '\u041f\u0440\u0435\u0437\u0438\u0434\u0435\u043d\u0442\u0441\u043a\u0438\u0439'), ('A', '\u0410\u043f\u0430\u0440\u0442\u0430\u043c\u0435\u043d\u0442\u044b') ] hotel = models.ForeignKey(Hotel, on_delete=models.CASCADE, verbose_name=\"\u041e\u0442\u0435\u043b\u044c\") number = models.IntegerField(\"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b\") description = models.CharField(\"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430\", max_length=1000) type_room = models.CharField(\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\", max_length=1, choices=TYPE_ROOM) beds = models.PositiveSmallIntegerField(\"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\", validators=[MinValueValidator(1)]) price = models.PositiveIntegerField(\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0430\") class Meta: # One hotel can't have two rooms with the same number unique_together = ('hotel', 'number') class Guest(models.Model): last_name = models.CharField(\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\", max_length=30, null=False) first_name = models.CharField(\"\u0418\u043c\u044f\", max_length=30, null=False) passport = models.CharField(\"\u041d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430\", primary_key=True, max_length=30) class Booking(models.Model): hotel = models.ForeignKey(Hotel, on_delete=models.CASCADE, verbose_name=\"\u041e\u0442\u0435\u043b\u044c\") room = models.ForeignKey(Room, on_delete=models.CASCADE) guest = models.ForeignKey(Guest, on_delete=models.CASCADE) date_start = models.DateField(\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") date_end = models.DateField(\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") total_price = models.PositiveIntegerField(\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f\", null=False) @property def days(self): return (self.date_end - self.date_start).days def check_date(self): if self.date_start >= self.date_end: raise ValidationError(\"\u041a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439!\") def save(self, *args, **kwargs): self.total_price = self.room.price * self.days super(Booking, self).save(*args, **kwargs) class Feedback(models.Model): booking = models.ForeignKey(Booking, on_delete=models.CASCADE, verbose_name=\"\u041a\u043e\u0434 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f\") author = models.CharField(\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u043d\u0438\u043a\", max_length=30) rate = models.IntegerField(\"\u041e\u0446\u0435\u043d\u043a\u0430\", default=0, validators=[MaxValueValidator(10), MinValueValidator(1)]) date_start = models.DateField(\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") date_end = models.DateField(\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") text = models.TextField(\"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439\", null=False) def save(self, *args, **kwargs): self.date_start = self.booking.date_start self.date_end = self.booking.date_end super(Feedback, self).save(*args, **kwargs) urls.py from django.contrib import admin from django.urls import path from hotels.views import * urlpatterns = [ path(\"admin/\", admin.site.urls), path('main/', main_page, name='main_page'), path(\"guests/add/\", AddGuests.as_view(), name='add_guest'), path('guests/<str:hotel_name>', guests_list), path(\"rooms/\", ListRooms.as_view(), name='rooms'), path(\"bookings/create\", CreateBooking.as_view(), name='add_booking'), path(\"bookings/my/\", MyBookings, name='my_bookings'), path(\"bookings/<int:guest_passport>/\", UserBookings), path(\"bookings/update/<int:pk>\", UpdateBooking.as_view()), path(\"bookings/delete/<int:pk>\", DeleteBooking.as_view()), path(\"feedbacks/add/\", AddFeedback, name='give_feedback'), path('feedbacks/',AllFeedbacks, name='all_feedbacks'), path('hotel/', get_hotel, name='hotel'), ] forms.py from django import forms from hotels.models import Feedback class CreateFeedback(forms.ModelForm): class Meta: model = Feedback fields = ['booking', 'author', 'text', 'rate'] admin.py from django.contrib import admin from hotels.models import * admin.site.register(Booking) admin.site.register(Hotel) admin.site.register(Guest) admin.site.register(Feedback) admin.site.register(Room) views.py from django.shortcuts import render, redirect from django.http import Http404 from hotels.models import Hotel, Booking, Room, Guest, Feedback from django.views.generic import ListView, UpdateView, CreateView, DeleteView from hotels.forms import CreateFeedback # \u0433\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 def main_page(request): return render(request, 'main_page.html') # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f class AddGuests(CreateView): model = Guest fields = [ \"last_name\", \"first_name\", \"passport\", ] template_name = \"add_guest.html\" success_url = \"/main/\" # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 class ListRooms(ListView): model = Room template_name = 'list_rooms.html' # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class CreateBooking(CreateView): model = Booking fields = [ 'hotel', 'room', 'guest', 'date_start', 'date_end' ] template_name = 'create_booking.html' success_url = '/bookings/my/' # \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class UpdateBooking(UpdateView): model = Booking fields = ['room', 'date_start', 'date_end'] template_name = 'update_booking.html' success_url = '/bookings/my/' # \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class DeleteBooking(DeleteView): model = Booking template_name = 'delete_booking.html' success_url = '/bookings/my/' # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f def UserBookings(request, guest_passport): need_book = Booking.objects.filter(guest=guest_passport) current_book = {\"object_list\": need_book} return render(request, 'users_bookings.html', current_book) # \u043e\u0442\u0431\u043e\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 def MyBookings(request): try: passport = int(request.POST.get('passport_user')) return redirect(f\"/bookings/{passport}/\") except: return render(request, \"my_bookings.html\") # \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 def AddFeedback(request): data = {} form = CreateFeedback(request.POST) if form.is_valid(): form.save() data['form'] = form return render(request, 'give_feedback.html', data) # \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 def AllFeedbacks(request): list_comments = {\"object_list\": Feedback.objects.all()} return render(request, 'all_feedbacks.html', list_comments) # \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0433\u043e\u0441\u0442\u0435\u0439 \u043e\u0442\u0435\u043b\u044f def get_hotel(request): hotel = request.POST.get('hotel_name') if hotel: return redirect(f\"/guests/{hotel}\") else: return render(request, 'hotel.html') def guests_list(request, hotel_name): guest_in_hotel = Booking.objects.filter(hotel=hotel_name).values_list('guest') nedeed_guests = Guest.objects.filter(passport__in=guest_in_hotel) list_of_guests = { \"object_list\": nedeed_guests, \"hotel_name\": hotel_name} return render(request, 'guests.html', list_of_guests)","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \"\u041e\u0442\u0435\u043b\u0438\""},{"location":"lab_2/#html-","text":"main_page.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Main</title> </head> <body> <div class = 'd-flex align-items-center flex-column'> <h1> \u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0435\u043b\u0435\u0439, \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 \u0438 \u0433\u043e\u0441\u0442\u0435\u0439 </h1> </div> <main class=\"container p-5\"> <div class=\"row p-1\"> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'add_guest' %}\" class=\"btn btn-outline-light \">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0433\u043e\u0441\u0442\u044f</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"{% url 'add_booking' %}\" class=\"btn btn-outline-light\">\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'my_bookings' %}\" class=\"btn btn-outline-light\">\u041c\u043e\u0438 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</a> </div> </div> </div> </div> <div class=\"row p-1\"> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"{% url 'rooms' %}\" class=\"btn btn-outline-light\">\u041a\u043e\u043c\u043d\u0430\u0442\u044b</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'all_feedbacks' %}\" class=\"btn btn-outline-light\">\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u0442\u0437\u044b\u0432\u044b</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"{% url 'give_feedback' %}\" class=\"btn btn-outline-light\">\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432</a> </div> </div> </div> </div> <div class=\"row p-1 \"> <div class=\"col-sm-4\"> <div class=\"card bg-success text-center\"> <div class=\"card-body\"> <a href=\"{% url 'hotel' %}\" class=\"btn btn-outline-light\">\u041a\u043b\u0438\u0435\u043d\u0442\u044b \u043e\u0442\u0435\u043b\u044f</a> </div> </div> </div> <div class=\"col-sm-4\"> <div class=\"card bg-danger text-center\"> <div class=\"card-body\"> <a href=\"/admin/\" class=\"btn btn-outline-light\">\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440</a> </div> </div> </div> </div> </main> </body> </html> add_guest.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>New guest</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0433\u043e\u0441\u0442\u044f</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-center\"> <button type=\"submit\" class=\"btn btn-success g-5 \">\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> all_feedbacks.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>All feedbacks</title> </head> <body> <table class=\"table table-hover table-bordered\"> <thead class=\"table-success\"> <tr> <th scope=\"col\">\u041e\u0442\u0435\u043b\u044c</th> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</th> <th scope=\"col\">\u0410\u0432\u0442\u043e\u0440</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439</th> </tr> </thead> {% for feedback in object_list %} <tbody> <tr> <td>{{ feedback.booking.room.hotel.name }}</td> <td>{{ feedback.booking.room.number }}</td> <td>{{ feedback.author }}</td> <td>{{ feedback.date_start }}</td> <td>{{ feedback.date_end }}</td> <td>{{ feedback.text }}</td> </tr> </tbody> {% endfor %} </table> </body> </html> create_booking.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Create booking</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h1 class=\"mt-2\">\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</h1> <hr class=\"mt-0 mb-4\"> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u0421\u043e\u0437\u0434\u0430\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> delete_booking.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Delete your booking</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} <div> <p class = \"d-flex justify-content-end\"></p>\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \"{{ object }}\"?</p> </div> <div> <input type=\"submit\" value=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\" class=\"btn btn-danger p-2 \"></input> </div> </form> </div> </div> </div> </body> </html> give_feedback.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Give your feedback!</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u041e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u0439 \u043e\u0442\u0437\u044b\u0432</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> guests.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>All guests</title> </head> <body> <h2 class=\"d-flex justify-content-center\"> \u0413\u043e\u0441\u0442\u0438 \u043e\u0442\u0435\u043b\u044f {{ hotel_name }}</h2> <table class=\"table table-hover table-bordered\"> <thead class=\"table-success table-hover\"> <tr> <th scope=\"col\">\u0424\u0430\u043c\u0438\u043b\u0438\u044f</th> <th scope=\"col\">\u0418\u043c\u044f</th> </tr> </thead> {% for guest in object_list %} <tbody> <tr> <td>{{ guest.last_name }}</td> <td>{{ guest.first_name }}</td> </tr> </tbody> {% endfor %} </table> </body> </html> hotel.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Hotel</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043e\u0442\u0435\u043b\u044f:</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-flex p-2 flex-column \"> <input type=\"text\" name=\"hotel_name\"> </div> <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> list_rooms.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>\u041d\u043e\u043c\u0435\u0440\u0430 \u0432 \u043e\u0442\u0435\u043b\u0435</title> </head> <body> <table class=\"table table-hover table-bordered\"> <thead class=\"table-success\"> <tr> <th scope=\"col\">\u041e\u0442\u0435\u043b\u044c</th> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</th> <th scope=\"col\">\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043d\u043e\u043c\u0435\u0440\u0430</th> <th scope=\"col\">\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430</th> <th scope=\"col\">\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442</th> <th scope=\"col\">\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043d\u043e\u043c\u0435\u0440\u0430 \u0437\u0430 \u043d\u043e\u0447\u044c</th> </tr> </thead> {% for room in object_list %} <tbody> <tr> <td>{{ room.hotel.name }}</td> <td>{{ room.number }}</td> <td>{{ room.description}}</td> <td>{{ room.type_room}}</td> <td>{{ room.beds }}</td> <td>{{ room.price}}</td> </tr> </tbody> {% endfor %} </table> </body> </html> my_bookings.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>My bookings</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430:</h2> <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-flex p-2 flex-column \"> <input type=\"text\" name=\"passport_user\"> </div> <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</button> </div> </form> </div> </div> </div> </body> </html> update_booking.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>Update your booking</title> </head> <body> <div class=\"container\"> <div class=\"row justify-content-center\"> <div class=\"col-8\"> <h2 class=\"mt-2\">\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f</h2> {% block content %} <form method=\"post\" enctype=\"multipart/form-data\"> {% csrf_token %} {{ form.as_p }} <div class=\"d-grid gap-2 d-md-flex justify-content-md-end\"> <button type=\"submit\" class=\"btn btn-success g-5\">\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c</button> </div> </form> {% endblock %} </div> </div> </div> </body> </html> users_bookings.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\"> <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script> <title>All bookings</title> </head> <body> <table class=\"table table-striped table-bordered table-hover\"> <thead class=\"table-success\"> <tr> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430</th> <th scope=\"col\">\u041e\u0442\u0435\u043b\u044c</th> <th scope=\"col\">\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430</th> <th scope=\"col\">\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c</th> <th scope=\"col\">\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438</th> </tr> </thead> {% for booking in object_list %} <tbody> <tr> <td>{{ booking.id }}</td> <td>{{ booking.room.hotel.name }}</td> <td>{{ booking.room.number }}</td> <td>{{ booking.date_start }}</td> <td>{{ booking.date_end}}</td> <td>{{ booking.total_price }}</td> <td class=\"d-flex justify-content-start gap-2\"> <a href=\"/bookings/update/{{ booking.id }}\"> <button type=\"button\" class=\"btn btn-outline-primary\">\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c</button> </a> <a href=\"/bookings/delete/{{ booking.id }}\"> <button type=\"button\" class=\"btn btn-outline-danger\">\u0423\u0434\u0430\u043b\u0438\u0442\u044c</button> </a> </td> </tr> </tbody> {% endfor %} </table> </body> </html>","title":"HTML-\u043a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u0438\u0446"},{"location":"lab_3/","text":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 3 \u0412\u0430\u0440\u0438\u0430\u043d\u0442 1 \"\u041e\u0442\u0435\u043b\u044c\" \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0443\u044e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b. \u0422\u0430\u043a\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u0439 \u043e\u0431 \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043d\u043e\u043c\u0435\u0440\u0430\u0445, \u043e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u0438 \u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445, \u0443\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u043d\u043e\u043c\u0435\u0440\u0430\u0445. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0440\u0435\u0445 \u0442\u0438\u043f\u043e\u0432: \u043e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u0434\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439 \u0438 \u0442\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\u044e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432 \u0441\u0443\u0442\u043a\u0438. \u0412 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u0435\u0441\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d. \u041e \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0435\u043c \u0434\u043e\u043b\u0436\u043d\u0430 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430, \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u043e\u0440\u043e\u0434, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u043d \u043f\u0440\u0438\u0431\u044b\u043b, \u0434\u0430\u0442\u0430 \u043f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440. \u041e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f: \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u0434\u0435 (\u044d\u0442\u0430\u0436) \u0438 \u043a\u043e\u0433\u0434\u0430 (\u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438) \u043e\u043d \u0443\u0431\u0438\u0440\u0430\u0435\u0442. \u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0443\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0441\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u0434\u043d\u0438 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0443\u0431\u0438\u0440\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u044d\u0442\u0430\u0436\u0438. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u0432\u0448\u0438\u0445 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435, \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438; \u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u043f\u0440\u0438\u0431\u044b\u0432\u0448\u0438\u0445 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430, \u043e \u0442\u043e\u043c, \u043a\u0442\u043e \u0438\u0437 \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0443\u0431\u0438\u0440\u0430\u043b \u043d\u043e\u043c\u0435\u0440 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432; \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0441\u0442\u0430 \u0436\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b\u0438 \u0432 \u0442\u0435 \u0436\u0435 \u0434\u043d\u0438, \u0447\u0442\u043e \u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: - \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438\u043b\u0438 \u0443\u0432\u043e\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b; - \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e; - \u043f\u043e\u0441\u0435\u043b\u0438\u0442\u044c \u0438\u043b\u0438 \u0432\u044b\u0441\u0435\u043b\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u044b\u0434\u0430\u0447\u0438 \u043e\u0442\u0447\u0435\u0442\u0430 \u043e \u0440\u0430\u0431\u043e\u0442\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0433\u043e\u0434\u0430. \u0422\u0430\u043a\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f: - \u0447\u0438\u0441\u043b\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435; - \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u043d\u0435 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u0436\u0435; - \u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0445\u043e\u0434\u0430 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440; - \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0434\u043e\u0445\u043e\u0434 \u043f\u043e \u0432\u0441\u0435\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435. \u041c\u043e\u0434\u0435\u043b\u044c \u0411\u0414 \u0424\u0430\u0439\u043b\u044b \u0441 \u043a\u043e\u0434\u043e\u043c models.py class Guest(models.Model): passport = models.TextField(\"\u041d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430\", max_length=10, primary_key=True) last_name = models.TextField(\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\", max_length=20, null=False) first_name = models.TextField(\"\u0418\u043c\u044f\", max_length=20, null=False) patronymic = models.TextField(\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\", max_length=20, null=True) city = models.TextField(\"\u0413\u043e\u0440\u043e\u0434\", max_length=30, null=False) class TypesRoom(models.Model): ROOM_TYPES = ( (\"\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439\", \"\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439\"), (\"\u0414\u0432\u0443\u043c\u0435\u0441\u0442\u043d\u044b\u0439\", \"\u0414\u0432\u0443\u043c\u0435\u0441\u0442\u043d\u044b\u0439\"), (\"\u0422\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439\", \"\u0422\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439\"), ) name_type = models.TextField(\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\", choices=ROOM_TYPES) count_beds = models.IntegerField(\"\u041a\u043e\u043b-\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\") price = models.FloatField(\"\u0426\u0435\u043d\u0430\") class Room(models.Model): room_number = models.IntegerField(\"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b\", primary_key=True) room_type = models.ForeignKey(TypesRoom, on_delete=models.CASCADE, verbose_name=\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\") floor = models.PositiveIntegerField(\"\u042d\u0442\u0430\u0436\") phone_number = models.PositiveIntegerField(\"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\", max_length=11) class Booking(models.Model): room_number = models.ForeignKey(Room, on_delete=models.CASCADE, related_name=\"booking_room\") guest = models.ForeignKey(Guest, on_delete=models.CASCADE, related_name=\"booking_guest\") date_start = models.DateTimeField(\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") date_end = models.DateTimeField(\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") total_price = models.PositiveIntegerField(\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f\", null=True) @property def days(self): return (self.date_end - self.date_start).days def check_date(self): if self.date_start >= self.date_end: raise ValidationError(\"\u041a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439!\") def save(self, *args, **kwargs): self.total_price = self.room_number.room_type.price * self.days super(Booking, self).save(*args, **kwargs) class Workers(models.Model): last_name = models.TextField(\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\", max_length=20, null=False) first_name = models.TextField(\"\u0418\u043c\u044f\", max_length=20, null=False) patronymic = models.TextField(\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\", max_length=20, null=True) class Cleaning(models.Model): WEEK_DAYS = ( (\"\u041f\u041d\", \"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a\"), (\"\u0412\u0422\", \"\u0412\u0442\u043e\u0440\u043d\u0438\u043a\"), (\"\u0421\u0420\", \"\u0421\u0440\u0435\u0434\u0430\"), (\"\u0427\u0422\", \"\u0427\u0435\u0442\u0432\u0435\u0440\u0433\"), (\"\u041f\u0422\", \"\u041f\u044f\u0442\u043d\u0438\u0446\u0430\"), (\"\u0421\u0411\", \"\u0421\u0443\u0431\u0431\u043e\u0442\u0430\"), (\"\u0412\u0421\", \"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435\"), ) id_worker = models.ForeignKey(Workers, on_delete=models.CASCADE) floor = models.PositiveIntegerField(\"\u042d\u0442\u0430\u0436\") day_of_week = models.TextField(\"\u0414\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438\", choices=WEEK_DAYS) urls.py urlpatterns = [ path(\"guest/all\", AllGuests.as_view()), path(\"guest/<str:city>\", GuestsByCity.as_view()), path(\"guest/<int:room_number>/<str:period_date_start>/<str:period_date_end>\", GuestsByPeriod.as_view()), path(\"guests/<str:passport>/<str:period_date_start>/<str:period_date_end>\", GuestsSamePeriods.as_view()), path(\"workers/all\", AllWorkers.as_view()), path(\"workers/<int:guest_passport>/<str:day_of_week>\", GetWorkerByDayAndClient.as_view()), path(\"booking/all\", AllBookings.as_view()), path(\"rooms/free\", FreeRoomsCount.as_view()), path(\"report/<int:quarter>\", QReport.as_view()), #path(\"guest/new\", CreateGuest.as_view()), #path(\"workers/new\", CreateWorker.as_view()), #path(\"booking/new\", CreateBooking.as_view()), ] views.py # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0433\u043e\u0441\u0442\u0435\u0439 \u043e\u0442\u0435\u043b\u044f class AllGuests(ListAPIView): queryset = Guest.objects.all() serializer_class = GuestSerializer # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 class AllBookings(ListAPIView): queryset = Booking.objects.all() serializer_class = BookingSerializer # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u043e\u0432 class AllWorkers(ListAPIView): queryset = Workers.objects.all() serializer_class = WorkersSerializer # \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430 class GuestsByCity(RetrieveAPIView): lookup_field = \"city\" queryset = Guest.objects.all() serializer_class = CountSerializer def retrieve(self, request, *args, **kwargs): serializer = self.serializer_class( CountObj(self.queryset.filter(**{self.lookup_field: kwargs[self.lookup_field]}).count()) ) return Response(serializer.data) # \u0433\u043e\u0441\u0442\u0438, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0438\u0435 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 class GuestsByPeriod(ListAPIView): queryset = Booking.objects.all() serializer_class = GuestsByPeriodSerializer def get_queryset(self): return self.queryset.filter( Q(date_start__gte=self.kwargs[\"period_date_start\"], date_end__lte=self.kwargs[\"period_date_end\"]) | Q(date_start__lte=self.kwargs[\"period_date_end\"], date_end__gte=self.kwargs[\"period_date_start\"]), room_number=self.kwargs[\"room_number\"] ) # \u043a\u0442\u043e \u0443\u0431\u0438\u0440\u0430\u0435\u0442 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0432 \u043d\u043e\u043c\u0435\u0440\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 class GetWorkerByDayAndClient(APIView): def get(self, request, **kwargs): worker = Cleaning.objects.filter(day_of_week=kwargs[\"day_of_week\"], floor__in=Room.objects.filter( booking_room__guest=kwargs[\"guest_passport\"]).values( \"floor\")) serializer = CleaningSerializer(worker, many=True) return Response(serializer.data) # \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f class FreeRoomsCount(RetrieveAPIView): serializer_class = CountSerializer def filtered_queryset(self): return Room.objects.exclude( Q(booking_room__date_end__gt=datetime.now(), booking_room__date_start__lt=datetime.now())).distinct() def retrieve(self, request, *args, **kwargs): serializer = self.serializer_class( CountObj(self.filtered_queryset().count()) ) return Response(serializer.data) # \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0441\u0442\u0430 \u0436\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b\u0438 \u0432 \u0442\u0435 \u0436\u0435 \u0434\u043d\u0438, \u0447\u0442\u043e \u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. class GuestsSamePeriods(APIView): def get(self, request, *args, **kwargs): result = [] needed_guests_bookings = Guest.objects.get(passport=kwargs[\"passport\"]).booking_guest.filter( Q(date_start__gte=self.kwargs[\"period_date_start\"], date_end__lte=self.kwargs[\"period_date_end\"]) | Q(date_start__lte=self.kwargs[\"period_date_end\"], date_end__gte=self.kwargs[\"period_date_start\"])) for booking in needed_guests_bookings: result += [booking.guest for booking in Booking.objects.filter( Q(date_start__gte=booking.date_start, date_end__lte=booking.date_end) | Q(date_start__lte=booking.date_end, date_end__gte=booking.date_start) ).exclude(guest__passport=kwargs[\"passport\"]) ] serializer = GuestSerializer(result, many=True) return Response(serializer.data) #\u043a\u0432\u0430\u0440\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 class QReport(APIView): def get(self, *args, **kwargs): if kwargs[\"quarter\"] == 1: filter = Q(date_start__gte=date(datetime.today().year, 1, 1), date_start__lt=date(datetime.today().year, 3, 31)) elif kwargs[\"quarter\"] == 2: filter = Q(date_start__gte=date(datetime.today().year, 4, 1), date_start__lt=date(datetime.today().year, 6, 30)) elif kwargs[\"quarter\"] == 3: filter = Q(date_start__gte=date(datetime.today().year, 7, 1), date_start__lt=date(datetime.today().year, 9, 30)) elif kwargs[\"quarter\"] == 4: filter = Q(date_start__gte=date(datetime.today().year, 10, 1), date_start__lt=date(datetime.today().year, 12, 31)) floors = [] for f in Room.objects.values(\"floor\").annotate(Count(\"room_number\")): floors.append({\"floor\": f[\"floor\"], \"count\": f[\"room_number__count\"]}) rooms = [] for room in Room.objects.all(): counter = 0 for booking in room.booking_room.filter(filter): counter += 1 rooms.append( { \"name\": room.room_number, \"count\": counter, \"profit\": booking.total_price } ) total_profit = sum(r[\"profit\"] for r in rooms) return render( self.request, \"report.html\", {\"rooms\": rooms, \"floors\": floors, \"profit\": total_profit} ) ''' # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0433\u043e\u0441\u0442\u044f class CreateGuest(CreateAPIView, ListAPIView): queryset = Guest.objects.all() serializer_class = CreateGuestSerializer # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class CreateBooking(CreateAPIView): serializer_class = CreateBookingSerializer permission_classes = [IsAuthenticated] def get(self, request): today = datetime.date(datetime.now()) book = Room.objects.filter(Q(booking_room__date_end__lt=today) | Q(booking_room__date_start__gt=today) | Q(booking_room__isnull=True)).distinct() serializer = BookSerializerOnlyRoom(book, many=True) return Response({\"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f\": serializer.data}) def post(self, request, **kwargs): serializer = BookingSerializer(data=request.data) needed_books = Room.objects.exclude( Q(booking_room__date_end__gt=datetime.now(), booking_room__date_start__lt=datetime.now())).distinct() if len(needed_books) == 0: return Response(\"\u041d\u0435\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442 \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443\", status=status.HTTP_400_BAD_REQUEST) serializer.is_valid(raise_exception=True) serializer.save() return Response(\"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e\", status=status.HTTP_201_CREATED) # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u0430 class CreateWorker(CreateAPIView, ListAPIView): queryset = Workers.objects.all() serializer_class = CreateWorkerSerializer permission_classes = [IsAuthenticated] ''' serializers.py class GuestSerializer(serializers.ModelSerializer): class Meta: model = Guest fields = \"__all__\" class BookingSerializer(serializers.ModelSerializer): class Meta: model = Booking fields = \"__all__\" class WorkersSerializer(serializers.ModelSerializer): class Meta: model = Workers fields = \"__all__\" class CreateGuestSerializer(serializers.ModelSerializer): class Meta: model = Guest fields = \"__all__\" class CreateWorkerSerializer(serializers.ModelSerializer): class Meta: model = Workers fields = \"__all__\" class CreateBookingSerializer(serializers.ModelSerializer): class Meta: model = Booking fields = ('room_number', 'guest', 'date_start', 'date_end') class CountObj: def __init__(self, count): self.count = count class CountSerializer(serializers.Serializer): count = serializers.IntegerField() class BookSerializerOnlyRoom(serializers.ModelSerializer): class Meta: model = Booking fields = [\"room_number\"] class GuestsByPeriodSerializer(serializers.ModelSerializer): class Meta: model = Booking fields = [\"guest\"] class CleaningSerializer(serializers.ModelSerializer): class Meta: model = Cleaning fields = ['id_worker'] admin.py from django.contrib import admin from .models import * admin.site.register(Booking) admin.site.register(Guest) admin.site.register(Room) admin.site.register(TypesRoom) admin.site.register(Workers) admin.site.register(Cleaning) HTML-\u043a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0441 \u043e\u0442\u0447\u0435\u0442\u043e\u043c report.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Report</title> </head> <body> <h3>\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0445\u043e\u0434\u0430 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438 \u0447\u0438\u0441\u043b\u043e \u0433\u043e\u0441\u0442\u0435\u0439, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u0432\u0448\u0438\u0445 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435</h3> {% for room in rooms %} <p>\u041a\u043e\u043c\u043d\u0430\u0442\u0430: {{ room.name }}. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439: {{ room.count }}. \u0414\u043e\u0445\u043e\u0434: {{ room.profit }}</p> {% endfor %} <hr> <h3>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043d\u0430\u0442 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u0436\u0435:</h3> {% for floor in floors %} <p>\u042d\u0442\u0430\u0436: {{ floor.floor }}. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043d\u0430\u0442: {{ floor.count }}</p> {% endfor %} <hr> <h3>\u0421\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0434\u043e\u0445\u043e\u0434 \u043f\u043e \u0432\u0441\u0435\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435</h3> <p>\u041e\u0431\u0449\u0438\u0439 \u0434\u043e\u0445\u043e\u0434: {{ profit }}</p> </body> </html> API","title":"\u041b\u0420 3"},{"location":"lab_3/#3","text":"","title":"\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 3"},{"location":"lab_3/#1","text":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0443\u044e \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b. \u0422\u0430\u043a\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0442\u044c \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u0439 \u043e\u0431 \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043d\u043e\u043c\u0435\u0440\u0430\u0445, \u043e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0438\u0445 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u0438 \u043e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445, \u0443\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0445\u0441\u044f \u0432 \u043d\u043e\u043c\u0435\u0440\u0430\u0445. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u0438 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0440\u0435\u0445 \u0442\u0438\u043f\u043e\u0432: \u043e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u0434\u0432\u0443\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439 \u0438 \u0442\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439, \u043e\u0442\u043b\u0438\u0447\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c\u044e \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0432 \u0441\u0443\u0442\u043a\u0438. \u0412 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u0435\u0441\u0442\u044c \u0442\u0435\u043b\u0435\u0444\u043e\u043d. \u041e \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0435\u043c \u0434\u043e\u043b\u0436\u043d\u0430 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f: \u043d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430, \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u043e\u0440\u043e\u0434, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u043d \u043f\u0440\u0438\u0431\u044b\u043b, \u0434\u0430\u0442\u0430 \u043f\u043e\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440. \u041e \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u044f: \u0444\u0430\u043c\u0438\u043b\u0438\u044f, \u0438\u043c\u044f, \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e, \u0433\u0434\u0435 (\u044d\u0442\u0430\u0436) \u0438 \u043a\u043e\u0433\u0434\u0430 (\u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438) \u043e\u043d \u0443\u0431\u0438\u0440\u0430\u0435\u0442. \u0421\u043b\u0443\u0436\u0430\u0449\u0438\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0443\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0441\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u043e\u0434\u043d\u043e\u043c \u044d\u0442\u0430\u0436\u0435 \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0432 \u0440\u0430\u0437\u043d\u044b\u0435 \u0434\u043d\u0438 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0443\u0431\u0438\u0440\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u044d\u0442\u0430\u0436\u0438. \u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438: \u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u0432\u0448\u0438\u0445 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435, \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438; \u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432, \u043f\u0440\u0438\u0431\u044b\u0432\u0448\u0438\u0445 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430, \u043e \u0442\u043e\u043c, \u043a\u0442\u043e \u0438\u0437 \u0441\u043b\u0443\u0436\u0430\u0449\u0438\u0445 \u0443\u0431\u0438\u0440\u0430\u043b \u043d\u043e\u043c\u0435\u0440 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432; \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0441\u0442\u0430 \u0436\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b\u0438 \u0432 \u0442\u0435 \u0436\u0435 \u0434\u043d\u0438, \u0447\u0442\u043e \u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438: - \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0443 \u0438\u043b\u0438 \u0443\u0432\u043e\u043b\u0438\u0442\u044c \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b; - \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043b\u0443\u0436\u0430\u0449\u0435\u0433\u043e; - \u043f\u043e\u0441\u0435\u043b\u0438\u0442\u044c \u0438\u043b\u0438 \u0432\u044b\u0441\u0435\u043b\u0438\u0442\u044c \u043a\u043b\u0438\u0435\u043d\u0442\u0430. \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0442\u0430\u043a\u0436\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0432\u044b\u0434\u0430\u0447\u0438 \u043e\u0442\u0447\u0435\u0442\u0430 \u043e \u0440\u0430\u0431\u043e\u0442\u0435 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043a\u0432\u0430\u0440\u0442\u0430\u043b \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0433\u043e\u0434\u0430. \u0422\u0430\u043a\u043e\u0439 \u043e\u0442\u0447\u0435\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f: - \u0447\u0438\u0441\u043b\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0437\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435; - \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u043d\u0435 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u0436\u0435; - \u043e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0445\u043e\u0434\u0430 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440; - \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0434\u043e\u0445\u043e\u0434 \u043f\u043e \u0432\u0441\u0435\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435.","title":"\u0412\u0430\u0440\u0438\u0430\u043d\u0442 1 \"\u041e\u0442\u0435\u043b\u044c\""},{"location":"lab_3/#_1","text":"","title":"\u041c\u043e\u0434\u0435\u043b\u044c \u0411\u0414"},{"location":"lab_3/#_2","text":"models.py class Guest(models.Model): passport = models.TextField(\"\u041d\u043e\u043c\u0435\u0440 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430\", max_length=10, primary_key=True) last_name = models.TextField(\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\", max_length=20, null=False) first_name = models.TextField(\"\u0418\u043c\u044f\", max_length=20, null=False) patronymic = models.TextField(\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\", max_length=20, null=True) city = models.TextField(\"\u0413\u043e\u0440\u043e\u0434\", max_length=30, null=False) class TypesRoom(models.Model): ROOM_TYPES = ( (\"\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439\", \"\u041e\u0434\u043d\u043e\u043c\u0435\u0441\u0442\u043d\u044b\u0439\"), (\"\u0414\u0432\u0443\u043c\u0435\u0441\u0442\u043d\u044b\u0439\", \"\u0414\u0432\u0443\u043c\u0435\u0441\u0442\u043d\u044b\u0439\"), (\"\u0422\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439\", \"\u0422\u0440\u0435\u0445\u043c\u0435\u0441\u0442\u043d\u044b\u0439\"), ) name_type = models.TextField(\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\", choices=ROOM_TYPES) count_beds = models.IntegerField(\"\u041a\u043e\u043b-\u0432\u043e \u0441\u043f\u0430\u043b\u044c\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\") price = models.FloatField(\"\u0426\u0435\u043d\u0430\") class Room(models.Model): room_number = models.IntegerField(\"\u041d\u043e\u043c\u0435\u0440 \u043a\u043e\u043c\u043d\u0430\u0442\u044b\", primary_key=True) room_type = models.ForeignKey(TypesRoom, on_delete=models.CASCADE, verbose_name=\"\u0422\u0438\u043f \u043d\u043e\u043c\u0435\u0440\u0430\") floor = models.PositiveIntegerField(\"\u042d\u0442\u0430\u0436\") phone_number = models.PositiveIntegerField(\"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430\", max_length=11) class Booking(models.Model): room_number = models.ForeignKey(Room, on_delete=models.CASCADE, related_name=\"booking_room\") guest = models.ForeignKey(Guest, on_delete=models.CASCADE, related_name=\"booking_guest\") date_start = models.DateTimeField(\"\u0414\u0430\u0442\u0430 \u0437\u0430\u0435\u0437\u0434\u0430\") date_end = models.DateTimeField(\"\u0414\u0430\u0442\u0430 \u0432\u044b\u0435\u0437\u0434\u0430\") total_price = models.PositiveIntegerField(\"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043d\u0438\u044f\", null=True) @property def days(self): return (self.date_end - self.date_start).days def check_date(self): if self.date_start >= self.date_end: raise ValidationError(\"\u041a\u043e\u043d\u0435\u0447\u043d\u0430\u044f \u0434\u0430\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0439!\") def save(self, *args, **kwargs): self.total_price = self.room_number.room_type.price * self.days super(Booking, self).save(*args, **kwargs) class Workers(models.Model): last_name = models.TextField(\"\u0424\u0430\u043c\u0438\u043b\u0438\u044f\", max_length=20, null=False) first_name = models.TextField(\"\u0418\u043c\u044f\", max_length=20, null=False) patronymic = models.TextField(\"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e\", max_length=20, null=True) class Cleaning(models.Model): WEEK_DAYS = ( (\"\u041f\u041d\", \"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a\"), (\"\u0412\u0422\", \"\u0412\u0442\u043e\u0440\u043d\u0438\u043a\"), (\"\u0421\u0420\", \"\u0421\u0440\u0435\u0434\u0430\"), (\"\u0427\u0422\", \"\u0427\u0435\u0442\u0432\u0435\u0440\u0433\"), (\"\u041f\u0422\", \"\u041f\u044f\u0442\u043d\u0438\u0446\u0430\"), (\"\u0421\u0411\", \"\u0421\u0443\u0431\u0431\u043e\u0442\u0430\"), (\"\u0412\u0421\", \"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435\"), ) id_worker = models.ForeignKey(Workers, on_delete=models.CASCADE) floor = models.PositiveIntegerField(\"\u042d\u0442\u0430\u0436\") day_of_week = models.TextField(\"\u0414\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438\", choices=WEEK_DAYS) urls.py urlpatterns = [ path(\"guest/all\", AllGuests.as_view()), path(\"guest/<str:city>\", GuestsByCity.as_view()), path(\"guest/<int:room_number>/<str:period_date_start>/<str:period_date_end>\", GuestsByPeriod.as_view()), path(\"guests/<str:passport>/<str:period_date_start>/<str:period_date_end>\", GuestsSamePeriods.as_view()), path(\"workers/all\", AllWorkers.as_view()), path(\"workers/<int:guest_passport>/<str:day_of_week>\", GetWorkerByDayAndClient.as_view()), path(\"booking/all\", AllBookings.as_view()), path(\"rooms/free\", FreeRoomsCount.as_view()), path(\"report/<int:quarter>\", QReport.as_view()), #path(\"guest/new\", CreateGuest.as_view()), #path(\"workers/new\", CreateWorker.as_view()), #path(\"booking/new\", CreateBooking.as_view()), ] views.py # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0433\u043e\u0441\u0442\u0435\u0439 \u043e\u0442\u0435\u043b\u044f class AllGuests(ListAPIView): queryset = Guest.objects.all() serializer_class = GuestSerializer # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439 class AllBookings(ListAPIView): queryset = Booking.objects.all() serializer_class = BookingSerializer # \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432\u0441\u0435\u0445 \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u043e\u0432 class AllWorkers(ListAPIView): queryset = Workers.objects.all() serializer_class = WorkersSerializer # \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0433\u043e\u0440\u043e\u0434\u0430 class GuestsByCity(RetrieveAPIView): lookup_field = \"city\" queryset = Guest.objects.all() serializer_class = CountSerializer def retrieve(self, request, *args, **kwargs): serializer = self.serializer_class( CountObj(self.queryset.filter(**{self.lookup_field: kwargs[self.lookup_field]}).count()) ) return Response(serializer.data) # \u0433\u043e\u0441\u0442\u0438, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u044e\u0449\u0438\u0435 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u0432 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 class GuestsByPeriod(ListAPIView): queryset = Booking.objects.all() serializer_class = GuestsByPeriodSerializer def get_queryset(self): return self.queryset.filter( Q(date_start__gte=self.kwargs[\"period_date_start\"], date_end__lte=self.kwargs[\"period_date_end\"]) | Q(date_start__lte=self.kwargs[\"period_date_end\"], date_end__gte=self.kwargs[\"period_date_start\"]), room_number=self.kwargs[\"room_number\"] ) # \u043a\u0442\u043e \u0443\u0431\u0438\u0440\u0430\u0435\u0442 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0434\u0435\u043d\u044c \u0432 \u043d\u043e\u043c\u0435\u0440\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043b\u0438\u0435\u043d\u0442\u0430 class GetWorkerByDayAndClient(APIView): def get(self, request, **kwargs): worker = Cleaning.objects.filter(day_of_week=kwargs[\"day_of_week\"], floor__in=Room.objects.filter( booking_room__guest=kwargs[\"guest_passport\"]).values( \"floor\")) serializer = CleaningSerializer(worker, many=True) return Response(serializer.data) # \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043d\u043e\u043c\u0435\u0440\u043e\u0432 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f class FreeRoomsCount(RetrieveAPIView): serializer_class = CountSerializer def filtered_queryset(self): return Room.objects.exclude( Q(booking_room__date_end__gt=datetime.now(), booking_room__date_start__lt=datetime.now())).distinct() def retrieve(self, request, *args, **kwargs): serializer = self.serializer_class( CountObj(self.filtered_queryset().count()) ) return Response(serializer.data) # \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432 \u0441 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043c\u0435\u0441\u0442\u0430 \u0436\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u043b\u0438 \u0432 \u0442\u0435 \u0436\u0435 \u0434\u043d\u0438, \u0447\u0442\u043e \u0438 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442, \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. class GuestsSamePeriods(APIView): def get(self, request, *args, **kwargs): result = [] needed_guests_bookings = Guest.objects.get(passport=kwargs[\"passport\"]).booking_guest.filter( Q(date_start__gte=self.kwargs[\"period_date_start\"], date_end__lte=self.kwargs[\"period_date_end\"]) | Q(date_start__lte=self.kwargs[\"period_date_end\"], date_end__gte=self.kwargs[\"period_date_start\"])) for booking in needed_guests_bookings: result += [booking.guest for booking in Booking.objects.filter( Q(date_start__gte=booking.date_start, date_end__lte=booking.date_end) | Q(date_start__lte=booking.date_end, date_end__gte=booking.date_start) ).exclude(guest__passport=kwargs[\"passport\"]) ] serializer = GuestSerializer(result, many=True) return Response(serializer.data) #\u043a\u0432\u0430\u0440\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0447\u0435\u0442 class QReport(APIView): def get(self, *args, **kwargs): if kwargs[\"quarter\"] == 1: filter = Q(date_start__gte=date(datetime.today().year, 1, 1), date_start__lt=date(datetime.today().year, 3, 31)) elif kwargs[\"quarter\"] == 2: filter = Q(date_start__gte=date(datetime.today().year, 4, 1), date_start__lt=date(datetime.today().year, 6, 30)) elif kwargs[\"quarter\"] == 3: filter = Q(date_start__gte=date(datetime.today().year, 7, 1), date_start__lt=date(datetime.today().year, 9, 30)) elif kwargs[\"quarter\"] == 4: filter = Q(date_start__gte=date(datetime.today().year, 10, 1), date_start__lt=date(datetime.today().year, 12, 31)) floors = [] for f in Room.objects.values(\"floor\").annotate(Count(\"room_number\")): floors.append({\"floor\": f[\"floor\"], \"count\": f[\"room_number__count\"]}) rooms = [] for room in Room.objects.all(): counter = 0 for booking in room.booking_room.filter(filter): counter += 1 rooms.append( { \"name\": room.room_number, \"count\": counter, \"profit\": booking.total_price } ) total_profit = sum(r[\"profit\"] for r in rooms) return render( self.request, \"report.html\", {\"rooms\": rooms, \"floors\": floors, \"profit\": total_profit} ) ''' # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0433\u043e\u0441\u0442\u044f class CreateGuest(CreateAPIView, ListAPIView): queryset = Guest.objects.all() serializer_class = CreateGuestSerializer # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f class CreateBooking(CreateAPIView): serializer_class = CreateBookingSerializer permission_classes = [IsAuthenticated] def get(self, request): today = datetime.date(datetime.now()) book = Room.objects.filter(Q(booking_room__date_end__lt=today) | Q(booking_room__date_start__gt=today) | Q(booking_room__isnull=True)).distinct() serializer = BookSerializerOnlyRoom(book, many=True) return Response({\"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0435 \u043d\u043e\u043c\u0435\u0440\u0430 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f\": serializer.data}) def post(self, request, **kwargs): serializer = BookingSerializer(data=request.data) needed_books = Room.objects.exclude( Q(booking_room__date_end__gt=datetime.now(), booking_room__date_start__lt=datetime.now())).distinct() if len(needed_books) == 0: return Response(\"\u041d\u0435\u0442 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0445 \u043c\u0435\u0441\u0442 \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443\", status=status.HTTP_400_BAD_REQUEST) serializer.is_valid(raise_exception=True) serializer.save() return Response(\"\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043e\", status=status.HTTP_201_CREATED) # \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u043d\u0438\u043a\u0430 class CreateWorker(CreateAPIView, ListAPIView): queryset = Workers.objects.all() serializer_class = CreateWorkerSerializer permission_classes = [IsAuthenticated] ''' serializers.py class GuestSerializer(serializers.ModelSerializer): class Meta: model = Guest fields = \"__all__\" class BookingSerializer(serializers.ModelSerializer): class Meta: model = Booking fields = \"__all__\" class WorkersSerializer(serializers.ModelSerializer): class Meta: model = Workers fields = \"__all__\" class CreateGuestSerializer(serializers.ModelSerializer): class Meta: model = Guest fields = \"__all__\" class CreateWorkerSerializer(serializers.ModelSerializer): class Meta: model = Workers fields = \"__all__\" class CreateBookingSerializer(serializers.ModelSerializer): class Meta: model = Booking fields = ('room_number', 'guest', 'date_start', 'date_end') class CountObj: def __init__(self, count): self.count = count class CountSerializer(serializers.Serializer): count = serializers.IntegerField() class BookSerializerOnlyRoom(serializers.ModelSerializer): class Meta: model = Booking fields = [\"room_number\"] class GuestsByPeriodSerializer(serializers.ModelSerializer): class Meta: model = Booking fields = [\"guest\"] class CleaningSerializer(serializers.ModelSerializer): class Meta: model = Cleaning fields = ['id_worker'] admin.py from django.contrib import admin from .models import * admin.site.register(Booking) admin.site.register(Guest) admin.site.register(Room) admin.site.register(TypesRoom) admin.site.register(Workers) admin.site.register(Cleaning)","title":"\u0424\u0430\u0439\u043b\u044b \u0441 \u043a\u043e\u0434\u043e\u043c"},{"location":"lab_3/#html-","text":"report.html <!DOCTYPE html> <html lang=\"en\"> <head> <meta charset=\"UTF-8\"> <title>Report</title> </head> <body> <h3>\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u0445\u043e\u0434\u0430 \u0437\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0438 \u0447\u0438\u0441\u043b\u043e \u0433\u043e\u0441\u0442\u0435\u0439, \u043f\u0440\u043e\u0436\u0438\u0432\u0430\u0432\u0448\u0438\u0445 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435</h3> {% for room in rooms %} <p>\u041a\u043e\u043c\u043d\u0430\u0442\u0430: {{ room.name }}. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0433\u043e\u0441\u0442\u0435\u0439: {{ room.count }}. \u0414\u043e\u0445\u043e\u0434: {{ room.profit }}</p> {% endfor %} <hr> <h3>\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043d\u0430\u0442 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u0436\u0435:</h3> {% for floor in floors %} <p>\u042d\u0442\u0430\u0436: {{ floor.floor }}. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043a\u043e\u043c\u043d\u0430\u0442: {{ floor.count }}</p> {% endfor %} <hr> <h3>\u0421\u0443\u043c\u043c\u0430\u0440\u043d\u044b\u0439 \u0434\u043e\u0445\u043e\u0434 \u043f\u043e \u0432\u0441\u0435\u0439 \u0433\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u0435</h3> <p>\u041e\u0431\u0449\u0438\u0439 \u0434\u043e\u0445\u043e\u0434: {{ profit }}</p> </body> </html>","title":"HTML-\u043a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0441 \u043e\u0442\u0447\u0435\u0442\u043e\u043c"},{"location":"lab_3/#api","text":"","title":"API"},{"location":"pr_3_1/","text":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 3.1 models.py from django.db import models class Car_owner(models.Model): last_name = models.CharField(max_length = 30, null = False) first_name = models.CharField(max_length = 30, null = False) birth_day = models.DateField(null = True) class Car(models.Model): state_number = models.CharField(max_length = 15, null = False) mark_car = models.CharField(max_length = 20, null = False) model_car = models.CharField(max_length = 20, null = False) color = models.CharField(max_length = 30, null = True) class Ownership(models.Model): id_owner = models.ForeignKey(Car_owner, on_delete = models.CASCADE, related_name='owner') id_car = models.ForeignKey(Car, on_delete = models.CASCADE, related_name='car') start_date = models.DateField() end_date = models.DateField(null = True) class Driver_license(models.Model): id_owner = models.ForeignKey(Car_owner, on_delete = models.CASCADE, related_name='car_owner') license_number = models.CharField(max_length = 10, null = False) category = models.CharField(max_length = 10, null = False) date_of_license= models.DateField() \u0417\u0430\u0434\u0430\u043d\u0438\u0435 1 \u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 6-7 \u043d\u043e\u0432\u044b\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 5-6 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439, \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442 1 \u0434\u043e 3 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0439 \u0421\u0432\u044f\u0437\u044c \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0441 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438 \u0417\u0430\u0434\u0430\u043d\u0438\u0435 2 \u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435) \u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430) \u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435) \u0417\u0430\u0434\u0430\u043d\u0438\u0435 3 \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b: \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435 \u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438 \u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f","title":"\u041f\u0420 3.1"},{"location":"pr_3_1/#31","text":"models.py from django.db import models class Car_owner(models.Model): last_name = models.CharField(max_length = 30, null = False) first_name = models.CharField(max_length = 30, null = False) birth_day = models.DateField(null = True) class Car(models.Model): state_number = models.CharField(max_length = 15, null = False) mark_car = models.CharField(max_length = 20, null = False) model_car = models.CharField(max_length = 20, null = False) color = models.CharField(max_length = 30, null = True) class Ownership(models.Model): id_owner = models.ForeignKey(Car_owner, on_delete = models.CASCADE, related_name='owner') id_car = models.ForeignKey(Car, on_delete = models.CASCADE, related_name='car') start_date = models.DateField() end_date = models.DateField(null = True) class Driver_license(models.Model): id_owner = models.ForeignKey(Car_owner, on_delete = models.CASCADE, related_name='car_owner') license_number = models.CharField(max_length = 10, null = False) category = models.CharField(max_length = 10, null = False) date_of_license= models.DateField()","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 3.1"},{"location":"pr_3_1/#1","text":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 6-7 \u043d\u043e\u0432\u044b\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0438 5-6 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439, \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0443 \u043d\u0430\u0437\u043d\u0430\u0447\u044c\u0442\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0435 \u0438 \u043e\u0442 1 \u0434\u043e 3 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439. \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0435\u0439 \u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u0439 \u0421\u0432\u044f\u0437\u044c \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u0441 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f\u043c\u0438","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1"},{"location":"pr_3_1/#2","text":"\u0412\u044b\u0432\u0435\u0434\u0435\u0442\u0435 \u0432\u0441\u0435 \u043c\u0430\u0448\u0438\u043d\u044b \u043c\u0430\u0440\u043a\u0438 \u201cToyota\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043c\u0430\u0440\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044c) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u0435\u0439 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \u201c\u041e\u043b\u0435\u0433\u201d (\u0438\u043b\u0438 \u043b\u044e\u0431\u044b\u043c \u0434\u0440\u0443\u0433\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0430 \u0432\u0430\u0448\u0435 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435) \u0412\u0437\u044f\u0432 \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e\u0433\u043e \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e id, \u0438 \u043f\u043e \u044d\u0442\u043e\u043c\u0443 id \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0432 \u0432\u0438\u0434\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043c\u043e\u0434\u0435\u043b\u0438 (\u043c\u043e\u0436\u043d\u043e \u0432 2 \u0437\u0430\u043f\u0440\u043e\u0441\u0430) \u0412\u044b\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043a\u0440\u0430\u0441\u043d\u044b\u0445 \u043c\u0430\u0448\u0438\u043d (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0446\u0432\u0435\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0443 \u0432\u0430\u0441 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442) \u041d\u0430\u0439\u0442\u0438 \u0432\u0441\u0435\u0445 \u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432, \u0447\u0435\u0439 \u0433\u043e\u0434 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 2010 (\u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0443 \u0432\u0430\u0441 \u0432 \u0431\u0430\u0437\u0435)","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2"},{"location":"pr_3_1/#3","text":"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b: \u0412\u044b\u0432\u043e\u0434 \u0434\u0430\u0442\u044b \u0432\u044b\u0434\u0430\u0447\u0438 \u0441\u0430\u043c\u043e\u0433\u043e \u0441\u0442\u0430\u0440\u0448\u0435\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0430\u043c\u0443\u044e \u043f\u043e\u0437\u0434\u043d\u044e\u044e \u0434\u0430\u0442\u0443 \u0432\u043b\u0430\u0434\u0435\u043d\u0438\u044f \u043c\u0430\u0448\u0438\u043d\u043e\u0439, \u0438\u043c\u0435\u044e\u0449\u0443\u044e \u043a\u0430\u043a\u0443\u044e-\u0442\u043e \u0438\u0437 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u0432 \u0432\u0430\u0448\u0435\u0439 \u0431\u0430\u0437\u0435 \u0412\u044b\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u041f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0430\u0448\u0438\u043d \u043a\u0430\u0436\u0434\u043e\u0439 \u043c\u0430\u0440\u043a\u0438 \u041e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0441\u0435\u0445 \u0430\u0432\u0442\u043e\u0432\u043b\u0430\u0434\u0435\u043b\u044c\u0446\u0435\u0432 \u043f\u043e \u0434\u0430\u0442\u0435 \u0432\u044b\u0434\u0430\u0447\u0438 \u0443\u0434\u043e\u0441\u0442\u043e\u0432\u0435\u0440\u0435\u043d\u0438\u044f","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3"}]}